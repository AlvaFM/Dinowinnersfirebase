<ion-header class="ion-header">
  <ion-toolbar class="ion-toolbar">
    <ion-title>Inicio</ion-title>

    <div *ngIf="nombreUsuario" slot="start">
      <span>{{nombreUsuario}}</span>
    </div>

  
    <ion-icon name="log-out" (click)="logout()" slot="end" *ngIf="nombreUsuario" size="large"></ion-icon>

    
  </ion-toolbar>
</ion-header>






<ion-content>
 <!-- seccion foro -->
  <section  *ngIf="selectedTab === 'foro'" style="padding: 16px;">
    <h5><strong>FORO DINOWINNERS</strong></h5>
    <ion-list>
      <ion-card *ngFor="let comentario of comentariosForo">
        <ion-card-header>
          <ion-card-title>
            <strong>{{ comentario.Usuario ?? comentario.Autor }}</strong> publicó:
          </ion-card-title>
        </ion-card-header>
        <ion-card-content>
          {{ comentario.Comentario }}
        </ion-card-content>
        <ion-button *ngIf="comentario.Tipo === 'CursoCapacitacion' && nombreUsuario" 
          (click)="irASuscripcion(comentario.uidCursoForo, comentario.NameCursoForo, comentario.Autor)">
          Suscribirse
        </ion-button>
      </ion-card>
    </ion-list>
    
  </section>
<!-- seccion productos -->
  <section *ngIf="selectedTab === 'productos'" class="section-padding">
    <h5><strong>PRODUCTOS DE USUARIO:</strong></h5>
    <ion-list>
      <div *ngFor="let usuario of usuarios">
        <ion-item>
          <ion-label class="user-name">{{ usuario.nombre }} </ion-label>
          <ion-button [routerLink]="['/perfil-ajeno', usuario.uid]">Ir a perfil</ion-button>
          
        </ion-item>
        <ion-list-header><ion-label>Productos</ion-label></ion-list-header>
        <div class="product-container">
          <ion-card *ngFor="let producto of productosPorUsuario[usuario.uid]" class="product-card">
            <ion-card-header>
              <ion-card-title>{{ producto.nombre }}</ion-card-title>
            </ion-card-header>
            <ion-card-content>
              <p>Descripción: {{ producto.descripcion }}</p>
              <p>Precio: ${{ producto.precio }}</p>
              <img *ngIf="producto.imageUrl" [src]="producto.imageUrl" alt="Imagen del producto" style="max-width: 100%; height: auto; max-height: 150px; object-fit: contain;" />
            </ion-card-content>
          </ion-card>
        </div>
  
        <ion-list-header><ion-label>Ubicaciones</ion-label></ion-list-header>
        <div class="product-container">
          <ion-card *ngFor="let ubicacion of ubicacionesPorUsuario[usuario.uid]" class="product-card">
            <ion-card-header>
              <ion-card-title>Ciudad: {{ ubicacion.ciudad }}</ion-card-title>
            </ion-card-header>
            <ion-card-content>
              <p>Dirección: {{ ubicacion.direccion }}</p>
            </ion-card-content>
          </ion-card>
        </div>
      </div>
    </ion-list>
  </section>
  
  
</ion-content> 

<!-- Movi lo de comentar aca para que no se deslice -->
<div *ngIf="nombreUsuario && selectedTab === 'foro'" class="comentario-fijo">
  <ion-row>
    <ion-col>
      <ion-textarea [(ngModel)]="comentarioForo" rows="3" placeholder="Escribe tu comentario..."></ion-textarea>
    </ion-col>
    <ion-col size="auto">
      <ion-button expand="full" (click)="ComentarForo()">
        <ion-icon name="send"></ion-icon>
      </ion-button>
    </ion-col>
  </ion-row>
</div>




<!-- Tab Bar en el footer -->
<ion-footer>
  <ion-tab-bar slot="bottom">
    <ion-tab-button (click)="selectedTab = 'productos'">
      <ion-icon color="warning" name="home"></ion-icon>
      <ion-label>Inicio</ion-label>
    </ion-tab-button>
    <ion-tab-button (click)="selectedTab = 'foro'">
      <ion-icon name="chatbubbles"></ion-icon>
      <ion-label>Foro</ion-label>
    </ion-tab-button>

    <ion-tab-button *ngIf="nombreUsuario === ''" routerLink="/login" (click)="selectedTab = 'productos'">
      <ion-icon color="warning" name="log-in"></ion-icon>
      <ion-label>Login</ion-label>
    </ion-tab-button>
    
    <ion-tab-button *ngIf="nombreUsuario" routerLink="/profile" (click)="selectedTab = 'productos'">
      <ion-icon color="warning" name="person"></ion-icon>
      <ion-label>Perfil</ion-label>
    </ion-tab-button>
  </ion-tab-bar>
</ion-footer>
