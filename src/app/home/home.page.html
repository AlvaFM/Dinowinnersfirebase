<ion-header class="ion-header">
  <ion-toolbar class="ion-toolbar">
    <ion-title>Inicio</ion-title>

    <div *ngIf="nombreUsuario" slot="start">
      <span>{{nombreUsuario}}</span>
    </div>

    <div slot="end" *ngIf="nombreUsuario">
      <span (click)="logout()" style="cursor: pointer;">Cerrar Sesión</span>
    </div>
  </ion-toolbar>
</ion-header>






<ion-content>
  <!-- Contenido de cada sección -->
  <section  *ngIf="selectedTab === 'foro'" style="padding: 16px;">
    <h5><strong>FORO DINOWINNERS</strong></h5>
    <ion-list>
      <ion-card *ngFor="let comentario of comentariosForo">
        <ion-card-header>
          <ion-card-title>
            <strong>{{ comentario.Usuario ?? comentario.Autor }}</strong> publicó:
          </ion-card-title>
        </ion-card-header>
        <ion-card-content>
          {{ comentario.Comentario }}
        </ion-card-content>
        <ion-button *ngIf="comentario.Tipo === 'CursoCapacitacion' && nombreUsuario" 
          (click)="irASuscripcion(comentario.uidCursoForo, comentario.NameCursoForo, comentario.Autor)">
          Subscribirse
        </ion-button>
      </ion-card>
    </ion-list>
    
  </section>

  <section *ngIf="selectedTab === 'productos'" style="padding: 16px;">
    <h5><strong>PRODUCTOS DE USUARIO:</strong></h5>
    <ion-list>
      <ion-card *ngFor="let usuario of usuarios">
        <ion-card-header>
          <ion-card-title style="font-weight: bold;">{{ usuario.nombre }}</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <ion-list-header><ion-label>Productos</ion-label></ion-list-header>
          <ion-list *ngFor="let producto of productosPorUsuario[usuario.uid]">
            <ion-item>
              <ion-label>
                <h3>Nombre: {{ producto.nombre }}</h3>
                <p>Descripción: {{ producto.descripcion }}</p>
                <p>Precio: ${{ producto.precio }}</p>
              </ion-label>
            </ion-item>
          </ion-list>
          <ion-list-header><ion-label>Ubicaciones</ion-label></ion-list-header>
          <ion-list *ngFor="let ubicacion of ubicacionesPorUsuario[usuario.uid]">
            <ion-item>
              <ion-label>
                <h3>Ciudad: {{ ubicacion.ciudad }}</h3>
                <p>Dirección: {{ ubicacion.direccion }}</p>
              </ion-label>
            </ion-item>
          </ion-list>
        </ion-card-content>
      </ion-card>
    </ion-list>
  </section>
</ion-content> 

<!-- Movi lo de comentar aca para que no se deslice -->
<div *ngIf="nombreUsuario && selectedTab === 'foro'" class="comentario-fijo">
  <ion-row>
    <ion-col>
      <ion-textarea [(ngModel)]="comentarioForo" rows="3" placeholder="Escribe tu comentario..."></ion-textarea>
    </ion-col>
    <ion-col size="auto">
      <ion-button expand="full" (click)="ComentarForo()">
        <ion-icon name="send"></ion-icon>
      </ion-button>
    </ion-col>
  </ion-row>
</div>




<!-- Tab Bar en el footer -->
<ion-footer>
  <ion-tab-bar slot="bottom">
    <ion-tab-button (click)="selectedTab = 'productos'">
      <ion-icon name="cart"></ion-icon>
      <ion-label>Productos</ion-label>
    </ion-tab-button>
    <ion-tab-button (click)="selectedTab = 'foro'">
      <ion-icon name="chatbubbles"></ion-icon>
      <ion-label>Foro</ion-label>
    </ion-tab-button>

    <ion-tab-button *ngIf="nombreUsuario === ''" routerLink="/login" (click)="selectedTab = 'productos'">
      <ion-icon name="log-in"></ion-icon>
      <ion-label>Login</ion-label>
    </ion-tab-button>
    
    <ion-tab-button *ngIf="nombreUsuario" routerLink="/profile" (click)="selectedTab = 'productos'">
      <ion-icon name="person"></ion-icon>
      <ion-label>Perfil</ion-label>
    </ion-tab-button>
  </ion-tab-bar>
</ion-footer>
